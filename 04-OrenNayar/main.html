<html>

<head>
    <title>04 - Oren Nayar</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <!-- chargement des librairies : maths, divers et debug -->
    <script type="text/javascript" src="libs/gl-matrix-min.js"></script>
    <script type="text/javascript" src="libs/webgl-utils.js"></script>
    <script type="text/javascript" src="libs/webgl-debug.js"></script>
    <script type="text/javascript" src="libs/utils.js"></script>

    <!-- bibliothèques pour gérer les maillages et matériaux -->
    <script type="text/javascript" src="libs/Mesh.js"></script>
    <script type="text/javascript" src="libs/Material.js"></script>
    <script type="text/javascript" src="libs/Texture2D.js"></script>

    <!-- définition des objets et matériaux à dessiner -->
    <script type="text/javascript" src="Grid.js"></script>
    <script type="text/javascript" src="Light.js"></script>
    <script type="text/javascript" src="MaterialGreen.js"></script>
    <script type="text/javascript" src="MaterialApple.js"></script>
    <script type="text/javascript" src="Apple.js"></script>
    <script type="text/javascript" src="Scene.js"></script>


    <!-- initialisation du contexte OpenGL dans le canvas -->
    <script type="text/javascript">

        var scene = null;

        function webGLStart()
        {
            // rechercher le canvas appelé "opengl-canvas"
            let canvas=document.getElementById("opengl-canvas");
            // le mettre en mode OpenGL
            initGL(canvas, {antialias:true});

            // créer la scène à dessiner
            scene = new Scene();
            scene.onSurfaceChanged(gl.viewportWidth, gl.viewportHeight);

            // demander de réafficher régulièrement
            //refresh();
            Utils.repeatRefresh();
        }

        function refresh()
        {
            if (typeof(scene) == "object")
                scene.onDrawFrame();
        }

        function onKeyDown(keycode)
        {
            if (typeof(scene) == "object" && typeof(scene.onKeyDown) == "function")
                scene.onKeyDown(String.fromCharCode(keycode));
        }

        function onKeyUp(keycode)
        {
        }

        function onMouseDown(btn, x, y)
        {
            if (typeof(scene) == "object" && typeof(scene.onMouseDown) == "function")
                scene.onMouseDown(btn, x, y);
        }

        function onMouseUp(btn, x, y)
        {
            if (typeof(scene) == "object" && typeof(scene.onMouseUp) == "function")
                scene.onMouseUp(btn, x, y);
        }

        function onMouseMove(x, y)
        {
            if (typeof(scene) == "object" && typeof(scene.onMouseMove) == "function")
                scene.onMouseMove(x, y);
        }

    </script>

</head>

<body onload="webGLStart();">

    <canvas id="opengl-canvas" width="640" height="480"
        style="border:1px solid black; background: black;"
        oncontextmenu="return false">
        Your browser does not support WebGL
    </canvas>
    <p id="infos" style="background-color:SeaShell">
        <!-- pour afficher des infos dans cette zone, faire :
            document.getElementById("debug").innerHTML = "message...";
        -->
    </p>
    <h2>Source files</h2>
    <ul>
        <li><a href="Grid.js">Grid.js</a></li>
        <li><a href="Light.js">Light.js</a></li>
        <li><a href="MaterialGreen.js">MaterialGreen.js</a></li>
        <li><a href="MaterialApple.js">MaterialApple.js</a></li>
        <li><a href="Apple.js">Apple.js</a></li>
        <li><a href="Scene.js">Scene.js</a></li>
    </ul>

</body>

</html>
